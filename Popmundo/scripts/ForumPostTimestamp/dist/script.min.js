"use strict";var TimeStampVisiblePreferences;!function(e){e[e.left=0]="left",e[e.onTimeText=1]="onTimeText"}(TimeStampVisiblePreferences=TimeStampVisiblePreferences||{});const timeRegex=/(?<day>\d{1,2})\.(?<month>\d{1,2})\.(?<year>\d{4}),\s(?<hour>\d{1,2}):(?<minute>\d{1,2})/,displayPreference=TimeStampVisiblePreferences.onTimeText;function sleep(t=1e3){return new Promise(e=>setTimeout(()=>e(void 0),t))}!async function(){await sleep(100);const a=jQuery("#ppm-content >div.marginWrapper >.talkbox:has(>.talkbox-byline, >.tbfbll)");if(console.log("Script run. Messages: %o",a),0!=a.length){moment.locale(window.navigator.language);const s=e=>` <span style="font-family:monospace; font-size:12px; vertical-allign:middle; color:maroon; white-space:nowrap;">(${e})</span>`,l=e=>{var{day:e,month:t,year:n,hour:i,minute:o}=e.trim().match(timeRegex)["groups"];return new Date(n,t-1,e,i,o)};a.each(e=>{var t,n=a.eq(e),e=n.find(">.talkbox-content >div >p.em:first"),i=(e.length&&(t=e.contents().last()[0],t=moment(l(t.textContent)).fromNow(),e.append(s(t))),n.find(">.talkbox-byline p:first, >.tbfbll p:first"));if(i.length){var e=i.contents().last()[0],o=moment(l(e.textContent)).fromNow();switch(displayPreference){case TimeStampVisiblePreferences.left:var r=jQuery(`<span style=" position: absolute; top: 0; font-size:11px; color:maroon; writing-mode: vertical-rl; /* text-orientation: upright; */ /* z-index: 2; */ ">${o}</span>`).appendTo(n);n.css({overflow:"unset",position:"relative"}),r.css("top",Math.max(3,Math.floor((n.find(">div:first").height()-r.height())/2))).css("left",-13-(r.width()-13.6));break;case TimeStampVisiblePreferences.onTimeText:i.append(s(o));break;default:throw new Error("Unknown TimeStampVisiblePreferences: "+displayPreference)}}})}}();